
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
    <link rel="shortcut icon" href="images/20190906170231_64693_32.ico" type="image/x-icon" />
    <meta name="Keywords" content="趣呵茶" />
    <meta name="Description" content="趣呵茶" />
    <link href="taotao.html" rel="canonical" />
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/home1.css">
    <link href="http://www.hecha.cn/longjing_list.html" rel="canonical" />
<link rel="stylesheet" type="text/css" href="http://www.hecha.cn/themes/hechav3/skin1/style/users.css">
    <style type="text/css">
        .hc_lnav .allbtn ul
        {
            display: none;
        }
    </style>
</head>
<body>
    <!-- 顶部 -->
    <div class="top-pic">
    <img src="images/toppic.png">
</div>
<div class="top">
    <div class="con clearfix">
        
        <div class="fr">
            <a href="http://www.hecha.cn/cn/UserInfo/OrderList.html" class="order-bg" id="myHechaLink">
                <i class="order"><img src="images/order.png"></i>我的订单
            </a>
            <i class="weChat"><img src="images/wx.png"></i>服务热线：
            <a>188-6042-4332</a>
        </div>
    </div>
</div>
<div class="head">
    <div class="con clearfix">
        <div class="fl logo"><a href="taotao copy.html" target="_blank"><img src="images/logo.png"></a></div>
        <div class="fl brand"><img src="images/brand.gif"></div>
        <div class="fr goods-cart">
            <i class="code"></i>
            <a href="Cart.html">
                <i class="cart"></i>
                <span>购物车（<span id="cartCount"></span>）</span>
            </a>
        </div>
    </div>
</div>
  <!-- 登录主体 -->
<div class="users_bg">
    <div class="hc_main">
        <div class="hc_reg">
            <div class="left">
                <p class="img">
                    <img id="BackImage" src="images/login_show1.jpg">
                </p>
            </div>
            <div class="regbox">
                <div class="title">
                    <ul>
                        <li class="on"><a href="denglu.html">登录和茶网</a></li>
                        <li><a href="zhuce.html" id="RegLink">新用户注册</a></li>
                        <div class="clr">
                        </div>
                    </ul>
                </div>
                <!--登录FORM-->
                <div class="list">
                    <ul class="reg">
                        <li>
                            <p class="ta">
                                登录名
                            </p>
                            <p class="ip">
                                <input id="user" name="txtUserName" type="text" class="input">
                            </p>
                            <div class="clr">
                            </div>
                        </li>
                        <li>
                            <p class="ta">
                                密&nbsp;&nbsp;码
                            </p>
                            <p class="ip">
                                <input id="pass" name="txtPassword" type="password" class="input">
                            </p>
                            <div class="clr">
                            </div>
                        </li>
                        <li>
                            <p class="ta">
                                &nbsp;
                            </p>
                            <p class="ip">
                                <input id="btn" name="" type="image" src="images/login.png"
                                    value="Submit" type="button">
                            </p>
                            <span id="span" style="font-size: 20px;margin-left:10px;color:deepskyblue"></span>
                            <div class="clr">
                            </div>
                        </li>
                        
                    </ul>
                </div>
            </div>
            <div class="clr">
            </div>
        </div>
        <div class="clr">
        </div>
    </div>
</div>
<script>
    
    class Login{
        constructor(){
            this.user = document.getElementById("user")
            this.pass = document.getElementById("pass")
            this.btn = document.getElementById("btn")
            this.span = document.querySelector("#span")

            this.addEvent();
            this.getLocal();
        }
        addEvent(){
            var that = this;
            this.btn.onclick = function(){
                that.login();
            }
        }
        getLocal(){
            // 之前有没有
            this.userMsg = localStorage.getItem("userMsg");
            this.userMsg = this.userMsg ? JSON.parse(this.userMsg) : [];
        }
        login(){
            var i = 0;
            var o = this.userMsg.some((val,index)=>{
                i = index;
                return val.user == this.user.value && val.pass == this.pass.value;
            })
            if(o){
                this.span.innerHTML = "成功";
                this.userMsg[i].onoff = 1;
                setTimeout(() => {
                    location.href = "taotao copy.html";
                }, 2000);
            }else{
                this.span.innerHTML = "失败";
            }
            localStorage.setItem("userMsg",JSON.stringify(this.userMsg))
        }
    }

    new Login();
</script>
   
</body>
</html>
